<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../.resources/report.css" type="text/css"/><link rel="shortcut icon" href="../.resources/report.gif" type="image/gif"/><title>GUI.java</title><link rel="stylesheet" href="../.resources/prettify.css" type="text/css"/><script type="text/javascript" src="../.resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../.sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">PMD Core</a> &gt; <a href="index.source.html" class="el_package">net.sourceforge.pmd.cpd</a> &gt; <span class="el_source">GUI.java</span></div><h1>GUI.java</h1><pre class="source lang-java linenums">/**
 * BSD-style license; for more info see http://pmd.sourceforge.net/license.html
 */

package net.sourceforge.pmd.cpd;

import java.awt.BorderLayout;
import java.awt.Component;
import java.awt.Dimension;
import java.awt.Point;
import java.awt.Toolkit;
import java.awt.datatransfer.StringSelection;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.awt.event.ItemEvent;
import java.awt.event.ItemListener;
import java.awt.event.KeyEvent;
import java.awt.event.MouseAdapter;
import java.awt.event.MouseEvent;
import java.io.File;
import java.io.FileOutputStream;
import java.io.IOException;
import java.io.PrintWriter;
import java.util.ArrayList;
import java.util.Collections;
import java.util.Comparator;
import java.util.HashMap;
import java.util.HashSet;
import java.util.Iterator;
import java.util.List;
import java.util.Map;
import java.util.Properties;
import java.util.Set;

import javax.swing.AbstractButton;
import javax.swing.BorderFactory;
import javax.swing.JButton;
import javax.swing.JCheckBox;
import javax.swing.JCheckBoxMenuItem;
import javax.swing.JComboBox;
import javax.swing.JComponent;
import javax.swing.JFileChooser;
import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.JMenu;
import javax.swing.JMenuBar;
import javax.swing.JMenuItem;
import javax.swing.JOptionPane;
import javax.swing.JPanel;
import javax.swing.JProgressBar;
import javax.swing.JScrollPane;
import javax.swing.JTable;
import javax.swing.JTextArea;
import javax.swing.JTextField;
import javax.swing.KeyStroke;
import javax.swing.ScrollPaneConstants;
import javax.swing.SwingConstants;
import javax.swing.Timer;
import javax.swing.event.ListSelectionEvent;
import javax.swing.event.ListSelectionListener;
import javax.swing.event.TableModelListener;
import javax.swing.table.DefaultTableCellRenderer;
import javax.swing.table.JTableHeader;
import javax.swing.table.TableColumn;
import javax.swing.table.TableColumnModel;
import javax.swing.table.TableModel;

import org.apache.commons.io.IOUtils;

import net.sourceforge.pmd.PMD;

public class GUI implements CPDListener {

    // private interface Renderer {
    // String render(Iterator&lt;Match&gt; items);
    // }

<span class="nc" id="L78">    private static final Object[][] RENDERER_SETS = new Object[][] { { &quot;Text&quot;, new Renderer() {</span>
        @Override
        public String render(Iterator&lt;Match&gt; items) {
<span class="nc" id="L81">            return new SimpleRenderer().render(items);</span>
        }
<span class="nc" id="L83">    }, }, { &quot;XML&quot;, new Renderer() {</span>
        @Override
        public String render(Iterator&lt;Match&gt; items) {
<span class="nc" id="L86">            return new XMLRenderer().render(items);</span>
        }
<span class="nc" id="L88">    }, }, { &quot;CSV (comma)&quot;, new Renderer() {</span>
        @Override
        public String render(Iterator&lt;Match&gt; items) {
<span class="nc" id="L91">            return new CSVRenderer(',').render(items);</span>
        }
<span class="nc" id="L93">    }, }, { &quot;CSV (tab)&quot;, new Renderer() {</span>
        @Override
        public String render(Iterator&lt;Match&gt; items) {
<span class="nc" id="L96">            return new CSVRenderer('\t').render(items);</span>
        }
    }, }, };

<span class="nc" id="L100">    private abstract static class LanguageConfig {</span>
        public abstract Language languageFor(Properties p);

        public boolean canIgnoreIdentifiers() {
<span class="nc" id="L104">            return false;</span>
        }

        public boolean canIgnoreLiterals() {
<span class="nc" id="L108">            return false;</span>
        }

        public boolean canIgnoreAnnotations() {
<span class="nc" id="L112">            return false;</span>
        }

        public boolean canIgnoreUsings() {
<span class="nc" id="L116">            return false;</span>
        }

        public abstract String[] extensions();
    }

    private static final Object[][] LANGUAGE_SETS;

    static {
<span class="nc" id="L125">        LANGUAGE_SETS = new Object[LanguageFactory.supportedLanguages.length + 1][2];</span>

        int index;
<span class="nc bnc" id="L128" title="All 2 branches missed.">        for (index = 0; index &lt; LanguageFactory.supportedLanguages.length; index++) {</span>
<span class="nc" id="L129">            final String terseName = LanguageFactory.supportedLanguages[index];</span>
<span class="nc" id="L130">            final Language lang = LanguageFactory.createLanguage(terseName);</span>
<span class="nc" id="L131">            LANGUAGE_SETS[index][0] = lang.getName();</span>
<span class="nc" id="L132">            LANGUAGE_SETS[index][1] = new LanguageConfig() {</span>
                @Override
                public Language languageFor(Properties p) {
<span class="nc" id="L135">                    lang.setProperties(p);</span>
<span class="nc" id="L136">                    return lang;</span>
                }

                @Override
                public String[] extensions() {
<span class="nc" id="L141">                    List&lt;String&gt; exts = lang.getExtensions();</span>
<span class="nc" id="L142">                    return exts.toArray(new String[exts.size()]);</span>
                }

                @Override
                public boolean canIgnoreAnnotations() {
<span class="nc" id="L147">                    return &quot;java&quot;.equals(terseName);</span>
                }

                @Override
                public boolean canIgnoreIdentifiers() {
<span class="nc" id="L152">                    return &quot;java&quot;.equals(terseName);</span>
                }

                @Override
                public boolean canIgnoreLiterals() {
<span class="nc" id="L157">                    return &quot;java&quot;.equals(terseName);</span>
                }

                @Override
                public boolean canIgnoreUsings() {
<span class="nc" id="L162">                    return &quot;cs&quot;.equals(terseName);</span>
                }
            };
        }
<span class="nc" id="L166">        LANGUAGE_SETS[index][0] = &quot;by extension...&quot;;</span>
<span class="nc" id="L167">        LANGUAGE_SETS[index][1] = new LanguageConfig() {</span>
            @Override
            public Language languageFor(Properties p) {
<span class="nc" id="L170">                return LanguageFactory.createLanguage(LanguageFactory.BY_EXTENSION, p);</span>
            }

            @Override
            public String[] extensions() {
<span class="nc" id="L175">                return new String[] { &quot;&quot; };</span>
            }
        };
    }

    private static final int DEFAULT_CPD_MINIMUM_LENGTH = 75;
<span class="nc" id="L181">    private static final Map&lt;String, LanguageConfig&gt; LANGUAGE_CONFIGS_BY_LABEL = new HashMap&lt;&gt;(LANGUAGE_SETS.length);</span>
<span class="nc" id="L182">    private static final KeyStroke COPY_KEY_STROKE = KeyStroke.getKeyStroke(KeyEvent.VK_C, ActionEvent.CTRL_MASK,</span>
            false);
<span class="nc" id="L184">    private static final KeyStroke DELETE_KEY_STROKE = KeyStroke.getKeyStroke(KeyEvent.VK_DELETE, 0);</span>

    private class ColumnSpec {
        private String label;
        private int alignment;
        private int width;
        private Comparator&lt;Match&gt; sorter;

<span class="nc" id="L192">        ColumnSpec(String aLabel, int anAlignment, int aWidth, Comparator&lt;Match&gt; aSorter) {</span>
<span class="nc" id="L193">            label = aLabel;</span>
<span class="nc" id="L194">            alignment = anAlignment;</span>
<span class="nc" id="L195">            width = aWidth;</span>
<span class="nc" id="L196">            sorter = aSorter;</span>
<span class="nc" id="L197">        }</span>

        public String label() {
<span class="nc" id="L200">            return label;</span>
        }

        public int alignment() {
<span class="nc" id="L204">            return alignment;</span>
        }

        public int width() {
<span class="nc" id="L208">            return width;</span>
        }

        public Comparator&lt;Match&gt; sorter() {
<span class="nc" id="L212">            return sorter;</span>
        }
    }

<span class="nc" id="L216">    private final ColumnSpec[] matchColumns = new ColumnSpec[] {</span>
        new ColumnSpec(&quot;Source&quot;, SwingConstants.LEFT, -1, Match.LABEL_COMPARATOR),
        new ColumnSpec(&quot;Matches&quot;, SwingConstants.RIGHT, 60, Match.MATCHES_COMPARATOR),
        new ColumnSpec(&quot;Lines&quot;, SwingConstants.RIGHT, 45, Match.LINES_COMPARATOR), };

    static {
<span class="nc bnc" id="L222" title="All 2 branches missed.">        for (int i = 0; i &lt; LANGUAGE_SETS.length; i++) {</span>
<span class="nc" id="L223">            LANGUAGE_CONFIGS_BY_LABEL.put((String) LANGUAGE_SETS[i][0], (LanguageConfig) LANGUAGE_SETS[i][1]);</span>
        }
<span class="nc" id="L225">    }</span>

    private static LanguageConfig languageConfigFor(String label) {
<span class="nc" id="L228">        return LANGUAGE_CONFIGS_BY_LABEL.get(label);</span>
    }

<span class="nc" id="L231">    private static class CancelListener implements ActionListener {</span>
        @Override
        public void actionPerformed(ActionEvent e) {
<span class="nc" id="L234">            System.exit(0);</span>
<span class="nc" id="L235">        }</span>
    }

<span class="nc" id="L238">    private class GoListener implements ActionListener {</span>
        @Override
        public void actionPerformed(ActionEvent e) {
<span class="nc" id="L241">            new Thread(new Runnable() {</span>
                @Override
                public void run() {
<span class="nc" id="L244">                    tokenizingFilesBar.setValue(0);</span>
<span class="nc" id="L245">                    tokenizingFilesBar.setString(&quot;&quot;);</span>
<span class="nc" id="L246">                    resultsTextArea.setText(&quot;&quot;);</span>
<span class="nc" id="L247">                    phaseLabel.setText(&quot;&quot;);</span>
<span class="nc" id="L248">                    timeField.setText(&quot;&quot;);</span>
<span class="nc" id="L249">                    go();</span>
<span class="nc" id="L250">                }</span>
            }).start();
<span class="nc" id="L252">        }</span>
    }

    private class SaveListener implements ActionListener {

        final Renderer renderer;

<span class="nc" id="L259">        SaveListener(Renderer theRenderer) {</span>
<span class="nc" id="L260">            renderer = theRenderer;</span>
<span class="nc" id="L261">        }</span>

        @Override
        public void actionPerformed(ActionEvent evt) {
<span class="nc" id="L265">            JFileChooser fcSave = new JFileChooser();</span>
<span class="nc" id="L266">            int ret = fcSave.showSaveDialog(GUI.this.frame);</span>
<span class="nc" id="L267">            File f = fcSave.getSelectedFile();</span>
<span class="nc bnc" id="L268" title="All 4 branches missed.">            if (f == null || ret != JFileChooser.APPROVE_OPTION) {</span>
<span class="nc" id="L269">                return;</span>
            }

<span class="nc bnc" id="L272" title="All 2 branches missed.">            if (!f.canWrite()) {</span>
<span class="nc" id="L273">                PrintWriter pw = null;</span>
                try {
<span class="nc" id="L275">                    pw = new PrintWriter(new FileOutputStream(f));</span>
<span class="nc" id="L276">                    pw.write(renderer.render(matches.iterator()));</span>
<span class="nc" id="L277">                    pw.flush();</span>
<span class="nc" id="L278">                    JOptionPane.showMessageDialog(frame, &quot;Saved &quot; + matches.size() + &quot; matches&quot;);</span>
<span class="nc" id="L279">                } catch (IOException e) {</span>
<span class="nc" id="L280">                    error(&quot;Couldn't save file&quot; + f.getAbsolutePath(), e);</span>
                } finally {
<span class="nc" id="L282">                    IOUtils.closeQuietly(pw);</span>
<span class="nc" id="L283">                }</span>
<span class="nc" id="L284">            } else {</span>
<span class="nc" id="L285">                error(&quot;Could not write to file &quot; + f.getAbsolutePath(), null);</span>
            }
<span class="nc" id="L287">        }</span>

        private void error(String message, Exception e) {
<span class="nc bnc" id="L290" title="All 2 branches missed.">            if (e != null) {</span>
<span class="nc" id="L291">                e.printStackTrace();</span>
            }
<span class="nc" id="L293">            JOptionPane.showMessageDialog(GUI.this.frame, message);</span>
<span class="nc" id="L294">        }</span>

    }

<span class="nc" id="L298">    private class BrowseListener implements ActionListener {</span>
        @Override
        public void actionPerformed(ActionEvent e) {
<span class="nc" id="L301">            JFileChooser fc = new JFileChooser(rootDirectoryField.getText());</span>
<span class="nc" id="L302">            fc.setFileSelectionMode(JFileChooser.FILES_AND_DIRECTORIES);</span>
<span class="nc" id="L303">            fc.showDialog(frame, &quot;Select&quot;);</span>
<span class="nc bnc" id="L304" title="All 2 branches missed.">            if (fc.getSelectedFile() != null) {</span>
<span class="nc" id="L305">                rootDirectoryField.setText(fc.getSelectedFile().getAbsolutePath());</span>
            }
<span class="nc" id="L307">        }</span>
    }

    private class AlignmentRenderer extends DefaultTableCellRenderer {
        private static final long serialVersionUID = -2190382865483285032L;
        private int[] alignments;

<span class="nc" id="L314">        AlignmentRenderer(int[] theAlignments) {</span>
<span class="nc" id="L315">            alignments = theAlignments;</span>
<span class="nc" id="L316">        }</span>

        @Override
        public Component getTableCellRendererComponent(JTable table, Object value, boolean isSelected, boolean hasFocus,
                int row, int column) {
<span class="nc" id="L321">            super.getTableCellRendererComponent(table, value, isSelected, hasFocus, row, column);</span>

<span class="nc" id="L323">            setHorizontalAlignment(alignments[column]);</span>

<span class="nc" id="L325">            return this;</span>
        }
    }

<span class="nc" id="L329">    private JTextField rootDirectoryField = new JTextField(System.getProperty(&quot;user.home&quot;));</span>
<span class="nc" id="L330">    private JTextField minimumLengthField = new JTextField(Integer.toString(DEFAULT_CPD_MINIMUM_LENGTH));</span>
<span class="nc" id="L331">    private JTextField encodingField = new JTextField(System.getProperty(&quot;file.encoding&quot;));</span>
<span class="nc" id="L332">    private JTextField timeField = new JTextField(6);</span>
<span class="nc" id="L333">    private JLabel phaseLabel = new JLabel();</span>
<span class="nc" id="L334">    private JProgressBar tokenizingFilesBar = new JProgressBar();</span>
<span class="nc" id="L335">    private JTextArea resultsTextArea = new JTextArea();</span>
<span class="nc" id="L336">    private JCheckBox recurseCheckbox = new JCheckBox(&quot;&quot;, true);</span>
<span class="nc" id="L337">    private JCheckBox ignoreIdentifiersCheckbox = new JCheckBox(&quot;&quot;, false);</span>
<span class="nc" id="L338">    private JCheckBox ignoreLiteralsCheckbox = new JCheckBox(&quot;&quot;, false);</span>
<span class="nc" id="L339">    private JCheckBox ignoreAnnotationsCheckbox = new JCheckBox(&quot;&quot;, false);</span>
<span class="nc" id="L340">    private JCheckBox ignoreUsingsCheckbox = new JCheckBox(&quot;&quot;, false);</span>
<span class="nc" id="L341">    private JComboBox&lt;String&gt; languageBox = new JComboBox&lt;&gt;();</span>
<span class="nc" id="L342">    private JTextField extensionField = new JTextField();</span>
<span class="nc" id="L343">    private JLabel extensionLabel = new JLabel(&quot;Extension:&quot;, SwingConstants.RIGHT);</span>
<span class="nc" id="L344">    private JTable resultsTable = new JTable();</span>
    private JButton goButton;
    private JButton cancelButton;
    private JPanel progressPanel;
    private JFrame frame;
    private boolean trimLeadingWhitespace;

<span class="nc" id="L351">    private List&lt;Match&gt; matches = new ArrayList&lt;&gt;();</span>

    private void addSaveOptionsTo(JMenu menu) {

        JMenuItem saveItem;

<span class="nc bnc" id="L357" title="All 2 branches missed.">        for (int i = 0; i &lt; RENDERER_SETS.length; i++) {</span>
<span class="nc" id="L358">            saveItem = new JMenuItem(&quot;Save as &quot; + RENDERER_SETS[i][0]);</span>
<span class="nc" id="L359">            saveItem.addActionListener(new SaveListener((Renderer) RENDERER_SETS[i][1]));</span>
<span class="nc" id="L360">            menu.add(saveItem);</span>
        }
<span class="nc" id="L362">    }</span>

<span class="nc" id="L364">    public GUI() {</span>
<span class="nc" id="L365">        frame = new JFrame(&quot;PMD Duplicate Code Detector (v &quot; + PMD.VERSION + ')');</span>

<span class="nc" id="L367">        timeField.setEditable(false);</span>

<span class="nc" id="L369">        JMenu fileMenu = new JMenu(&quot;File&quot;);</span>
<span class="nc" id="L370">        fileMenu.setMnemonic('f');</span>

<span class="nc" id="L372">        addSaveOptionsTo(fileMenu);</span>

<span class="nc" id="L374">        JMenuItem exitItem = new JMenuItem(&quot;Exit&quot;);</span>
<span class="nc" id="L375">        exitItem.setMnemonic('x');</span>
<span class="nc" id="L376">        exitItem.addActionListener(new CancelListener());</span>
<span class="nc" id="L377">        fileMenu.add(exitItem);</span>
<span class="nc" id="L378">        JMenu viewMenu = new JMenu(&quot;View&quot;);</span>
<span class="nc" id="L379">        fileMenu.setMnemonic('v');</span>
<span class="nc" id="L380">        JMenuItem trimItem = new JCheckBoxMenuItem(&quot;Trim leading whitespace&quot;);</span>
<span class="nc" id="L381">        trimItem.addItemListener(new ItemListener() {</span>
            @Override
            public void itemStateChanged(ItemEvent e) {
<span class="nc" id="L384">                AbstractButton button = (AbstractButton) e.getItem();</span>
<span class="nc" id="L385">                GUI.this.trimLeadingWhitespace = button.isSelected();</span>
<span class="nc" id="L386">            }</span>
        });
<span class="nc" id="L388">        viewMenu.add(trimItem);</span>
<span class="nc" id="L389">        JMenuBar menuBar = new JMenuBar();</span>
<span class="nc" id="L390">        menuBar.add(fileMenu);</span>
<span class="nc" id="L391">        menuBar.add(viewMenu);</span>
<span class="nc" id="L392">        frame.setJMenuBar(menuBar);</span>

        // first make all the buttons
<span class="nc" id="L395">        JButton browseButton = new JButton(&quot;Browse&quot;);</span>
<span class="nc" id="L396">        browseButton.setMnemonic('b');</span>
<span class="nc" id="L397">        browseButton.addActionListener(new BrowseListener());</span>
<span class="nc" id="L398">        goButton = new JButton(&quot;Go&quot;);</span>
<span class="nc" id="L399">        goButton.setMnemonic('g');</span>
<span class="nc" id="L400">        goButton.addActionListener(new GoListener());</span>
<span class="nc" id="L401">        cancelButton = new JButton(&quot;Cancel&quot;);</span>
<span class="nc" id="L402">        cancelButton.addActionListener(new CancelListener());</span>

<span class="nc" id="L404">        JPanel settingsPanel = makeSettingsPanel(browseButton, goButton, cancelButton);</span>
<span class="nc" id="L405">        progressPanel = makeProgressPanel();</span>
<span class="nc" id="L406">        JPanel resultsPanel = makeResultsPanel();</span>

<span class="nc" id="L408">        adjustLanguageControlsFor((LanguageConfig) LANGUAGE_SETS[0][1]);</span>

<span class="nc" id="L410">        frame.getContentPane().setLayout(new BorderLayout());</span>
<span class="nc" id="L411">        JPanel topPanel = new JPanel();</span>
<span class="nc" id="L412">        topPanel.setLayout(new BorderLayout());</span>
<span class="nc" id="L413">        topPanel.add(settingsPanel, BorderLayout.NORTH);</span>
<span class="nc" id="L414">        topPanel.add(progressPanel, BorderLayout.CENTER);</span>
<span class="nc" id="L415">        setProgressControls(false); // not running now</span>
<span class="nc" id="L416">        frame.getContentPane().add(topPanel, BorderLayout.NORTH);</span>
<span class="nc" id="L417">        frame.getContentPane().add(resultsPanel, BorderLayout.CENTER);</span>
<span class="nc" id="L418">        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);</span>
<span class="nc" id="L419">        frame.pack();</span>
<span class="nc" id="L420">        frame.setVisible(true);</span>
<span class="nc" id="L421">    }</span>

    private void adjustLanguageControlsFor(LanguageConfig current) {
<span class="nc" id="L424">        ignoreIdentifiersCheckbox.setEnabled(current.canIgnoreIdentifiers());</span>
<span class="nc" id="L425">        ignoreLiteralsCheckbox.setEnabled(current.canIgnoreLiterals());</span>
<span class="nc" id="L426">        ignoreAnnotationsCheckbox.setEnabled(current.canIgnoreAnnotations());</span>
<span class="nc" id="L427">        ignoreUsingsCheckbox.setEnabled(current.canIgnoreUsings());</span>
<span class="nc" id="L428">        extensionField.setText(current.extensions()[0]);</span>
<span class="nc bnc" id="L429" title="All 2 branches missed.">        boolean enableExtension = current.extensions()[0].length() == 0;</span>
<span class="nc" id="L430">        extensionField.setEnabled(enableExtension);</span>
<span class="nc" id="L431">        extensionLabel.setEnabled(enableExtension);</span>
<span class="nc" id="L432">    }</span>

    private JPanel makeSettingsPanel(JButton browseButton, JButton goButton, JButton cxButton) {
<span class="nc" id="L435">        JPanel settingsPanel = new JPanel();</span>
<span class="nc" id="L436">        GridBagHelper helper = new GridBagHelper(settingsPanel, new double[] { 0.2, 0.7, 0.1, 0.1 });</span>
<span class="nc" id="L437">        helper.addLabel(&quot;Root source directory:&quot;);</span>
<span class="nc" id="L438">        helper.add(rootDirectoryField);</span>
<span class="nc" id="L439">        helper.add(browseButton, 2);</span>
<span class="nc" id="L440">        helper.nextRow();</span>
<span class="nc" id="L441">        helper.addLabel(&quot;Report duplicate chunks larger than:&quot;);</span>
<span class="nc" id="L442">        minimumLengthField.setColumns(4);</span>
<span class="nc" id="L443">        helper.add(minimumLengthField);</span>
<span class="nc" id="L444">        helper.addLabel(&quot;Language:&quot;);</span>
<span class="nc bnc" id="L445" title="All 2 branches missed.">        for (int i = 0; i &lt; LANGUAGE_SETS.length; i++) {</span>
<span class="nc" id="L446">            languageBox.addItem(String.valueOf(LANGUAGE_SETS[i][0]));</span>
        }
<span class="nc" id="L448">        languageBox.addActionListener(new ActionListener() {</span>
            @Override
            public void actionPerformed(ActionEvent e) {
<span class="nc" id="L451">                adjustLanguageControlsFor(languageConfigFor((String) languageBox.getSelectedItem()));</span>
<span class="nc" id="L452">            }</span>
        });
<span class="nc" id="L454">        helper.add(languageBox);</span>
<span class="nc" id="L455">        helper.nextRow();</span>
<span class="nc" id="L456">        helper.addLabel(&quot;Also scan subdirectories?&quot;);</span>
<span class="nc" id="L457">        helper.add(recurseCheckbox);</span>

<span class="nc" id="L459">        helper.add(extensionLabel);</span>
<span class="nc" id="L460">        helper.add(extensionField);</span>

<span class="nc" id="L462">        helper.nextRow();</span>
<span class="nc" id="L463">        helper.addLabel(&quot;Ignore literals?&quot;);</span>
<span class="nc" id="L464">        helper.add(ignoreLiteralsCheckbox);</span>
<span class="nc" id="L465">        helper.addLabel(&quot;&quot;);</span>
<span class="nc" id="L466">        helper.addLabel(&quot;&quot;);</span>
<span class="nc" id="L467">        helper.nextRow();</span>

<span class="nc" id="L469">        helper.nextRow();</span>
<span class="nc" id="L470">        helper.addLabel(&quot;Ignore identifiers?&quot;);</span>
<span class="nc" id="L471">        helper.add(ignoreIdentifiersCheckbox);</span>
<span class="nc" id="L472">        helper.addLabel(&quot;&quot;);</span>
<span class="nc" id="L473">        helper.addLabel(&quot;&quot;);</span>
<span class="nc" id="L474">        helper.nextRow();</span>

<span class="nc" id="L476">        helper.nextRow();</span>
<span class="nc" id="L477">        helper.addLabel(&quot;Ignore annotations?&quot;);</span>
<span class="nc" id="L478">        helper.add(ignoreAnnotationsCheckbox);</span>
<span class="nc" id="L479">        helper.addLabel(&quot;&quot;);</span>
<span class="nc" id="L480">        helper.addLabel(&quot;&quot;);</span>
<span class="nc" id="L481">        helper.nextRow();</span>

<span class="nc" id="L483">        helper.nextRow();</span>
<span class="nc" id="L484">        helper.addLabel(&quot;Ignore usings?&quot;);</span>
<span class="nc" id="L485">        helper.add(ignoreUsingsCheckbox);</span>
<span class="nc" id="L486">        helper.add(goButton);</span>
<span class="nc" id="L487">        helper.add(cxButton);</span>
<span class="nc" id="L488">        helper.nextRow();</span>

<span class="nc" id="L490">        helper.addLabel(&quot;File encoding (defaults based upon locale):&quot;);</span>
<span class="nc" id="L491">        encodingField.setColumns(1);</span>
<span class="nc" id="L492">        helper.add(encodingField);</span>
<span class="nc" id="L493">        helper.addLabel(&quot;&quot;);</span>
<span class="nc" id="L494">        helper.addLabel(&quot;&quot;);</span>
<span class="nc" id="L495">        helper.nextRow();</span>
        // settingsPanel.setBorder(BorderFactory.createTitledBorder(&quot;Settings&quot;));
<span class="nc" id="L497">        return settingsPanel;</span>
    }

    private JPanel makeProgressPanel() {
<span class="nc" id="L501">        JPanel progressPanel = new JPanel();</span>
<span class="nc" id="L502">        final double[] weights = { 0.0, 0.8, 0.4, 0.2 };</span>
<span class="nc" id="L503">        GridBagHelper helper = new GridBagHelper(progressPanel, weights);</span>
<span class="nc" id="L504">        helper.addLabel(&quot;Tokenizing files:&quot;);</span>
<span class="nc" id="L505">        helper.add(tokenizingFilesBar, 3);</span>
<span class="nc" id="L506">        helper.nextRow();</span>
<span class="nc" id="L507">        helper.addLabel(&quot;Phase:&quot;);</span>
<span class="nc" id="L508">        helper.add(phaseLabel);</span>
<span class="nc" id="L509">        helper.addLabel(&quot;Time elapsed:&quot;);</span>
<span class="nc" id="L510">        helper.add(timeField);</span>
<span class="nc" id="L511">        helper.nextRow();</span>
<span class="nc" id="L512">        progressPanel.setBorder(BorderFactory.createTitledBorder(&quot;Progress&quot;));</span>
<span class="nc" id="L513">        return progressPanel;</span>
    }

    private JPanel makeResultsPanel() {
<span class="nc" id="L517">        JPanel resultsPanel = new JPanel();</span>
<span class="nc" id="L518">        resultsPanel.setLayout(new BorderLayout());</span>
<span class="nc" id="L519">        JScrollPane areaScrollPane = new JScrollPane(resultsTextArea);</span>
<span class="nc" id="L520">        resultsTextArea.setEditable(false);</span>
<span class="nc" id="L521">        areaScrollPane.setVerticalScrollBarPolicy(ScrollPaneConstants.VERTICAL_SCROLLBAR_ALWAYS);</span>
<span class="nc" id="L522">        areaScrollPane.setPreferredSize(new Dimension(600, 300));</span>

<span class="nc" id="L524">        resultsPanel.add(makeMatchList(), BorderLayout.WEST);</span>
<span class="nc" id="L525">        resultsPanel.add(areaScrollPane, BorderLayout.CENTER);</span>
<span class="nc" id="L526">        return resultsPanel;</span>
    }

    private void populateResultArea() {
<span class="nc" id="L530">        int[] selectionIndices = resultsTable.getSelectedRows();</span>
<span class="nc" id="L531">        TableModel model = resultsTable.getModel();</span>
<span class="nc" id="L532">        List&lt;Match&gt; selections = new ArrayList&lt;&gt;(selectionIndices.length);</span>
<span class="nc bnc" id="L533" title="All 2 branches missed.">        for (int i = 0; i &lt; selectionIndices.length; i++) {</span>
<span class="nc" id="L534">            selections.add((Match) model.getValueAt(selectionIndices[i], 99));</span>
        }
<span class="nc" id="L536">        String report = new SimpleRenderer(trimLeadingWhitespace).render(selections.iterator());</span>
<span class="nc" id="L537">        resultsTextArea.setText(report);</span>
<span class="nc" id="L538">        resultsTextArea.setCaretPosition(0); // move to the top</span>
<span class="nc" id="L539">    }</span>

    private void copyMatchListSelectionsToClipboard() {

<span class="nc" id="L543">        int[] selectionIndices = resultsTable.getSelectedRows();</span>
<span class="nc" id="L544">        int colCount = resultsTable.getColumnCount();</span>

<span class="nc" id="L546">        StringBuilder sb = new StringBuilder();</span>

<span class="nc bnc" id="L548" title="All 2 branches missed.">        for (int r = 0; r &lt; selectionIndices.length; r++) {</span>
<span class="nc bnc" id="L549" title="All 2 branches missed.">            if (r &gt; 0) {</span>
<span class="nc" id="L550">                sb.append('\n');</span>
            }
<span class="nc" id="L552">            sb.append(resultsTable.getValueAt(selectionIndices[r], 0));</span>
<span class="nc bnc" id="L553" title="All 2 branches missed.">            for (int c = 1; c &lt; colCount; c++) {</span>
<span class="nc" id="L554">                sb.append('\t');</span>
<span class="nc" id="L555">                sb.append(resultsTable.getValueAt(selectionIndices[r], c));</span>
            }
        }

<span class="nc" id="L559">        StringSelection ss = new StringSelection(sb.toString());</span>
<span class="nc" id="L560">        Toolkit.getDefaultToolkit().getSystemClipboard().setContents(ss, null);</span>
<span class="nc" id="L561">    }</span>

    private void deleteMatchlistSelections() {

<span class="nc" id="L565">        int[] selectionIndices = resultsTable.getSelectedRows();</span>

<span class="nc bnc" id="L567" title="All 2 branches missed.">        for (int i = selectionIndices.length - 1; i &gt;= 0; i--) {</span>
<span class="nc" id="L568">            matches.remove(selectionIndices[i]);</span>
        }

<span class="nc" id="L571">        resultsTable.getSelectionModel().clearSelection();</span>
<span class="nc" id="L572">        resultsTable.addNotify();</span>
<span class="nc" id="L573">    }</span>

    private JComponent makeMatchList() {

<span class="nc" id="L577">        resultsTable.getSelectionModel().addListSelectionListener(new ListSelectionListener() {</span>
            @Override
            public void valueChanged(ListSelectionEvent e) {
<span class="nc" id="L580">                populateResultArea();</span>
<span class="nc" id="L581">            }</span>
        });

<span class="nc" id="L584">        resultsTable.registerKeyboardAction(new ActionListener() {</span>
            @Override
            public void actionPerformed(ActionEvent e) {
<span class="nc" id="L587">                copyMatchListSelectionsToClipboard();</span>
<span class="nc" id="L588">            }</span>
        }, &quot;Copy&quot;, COPY_KEY_STROKE, JComponent.WHEN_FOCUSED);

<span class="nc" id="L591">        resultsTable.registerKeyboardAction(new ActionListener() {</span>
            @Override
            public void actionPerformed(ActionEvent e) {
<span class="nc" id="L594">                deleteMatchlistSelections();</span>
<span class="nc" id="L595">            }</span>
        }, &quot;Del&quot;, DELETE_KEY_STROKE, JComponent.WHEN_FOCUSED);

<span class="nc" id="L598">        int[] alignments = new int[matchColumns.length];</span>
<span class="nc bnc" id="L599" title="All 2 branches missed.">        for (int i = 0; i &lt; alignments.length; i++) {</span>
<span class="nc" id="L600">            alignments[i] = matchColumns[i].alignment();</span>
        }

<span class="nc" id="L603">        resultsTable.setDefaultRenderer(Object.class, new AlignmentRenderer(alignments));</span>

<span class="nc" id="L605">        final JTableHeader header = resultsTable.getTableHeader();</span>
<span class="nc" id="L606">        header.addMouseListener(new MouseAdapter() {</span>
            @Override
            public void mouseClicked(MouseEvent e) {
<span class="nc" id="L609">                sortOnColumn(header.columnAtPoint(new Point(e.getX(), e.getY())));</span>
<span class="nc" id="L610">            }</span>
        });

<span class="nc" id="L613">        return new JScrollPane(resultsTable);</span>
    }

    private boolean isLegalPath(String path, LanguageConfig config) {
<span class="nc" id="L617">        String[] extensions = config.extensions();</span>
<span class="nc bnc" id="L618" title="All 2 branches missed.">        for (int i = 0; i &lt; extensions.length; i++) {</span>
<span class="nc bnc" id="L619" title="All 4 branches missed.">            if (path.endsWith(extensions[i]) &amp;&amp; extensions[i].length() &gt; 0) {</span>
<span class="nc" id="L620">                return true;</span>
            }
        }
<span class="nc" id="L623">        return false;</span>
    }

    private String setLabelFor(Match match) {

<span class="nc" id="L628">        Set&lt;String&gt; sourceIDs = new HashSet&lt;&gt;(match.getMarkCount());</span>
<span class="nc bnc" id="L629" title="All 2 branches missed.">        for (Iterator&lt;Mark&gt; occurrences = match.iterator(); occurrences.hasNext();) {</span>
<span class="nc" id="L630">            sourceIDs.add(occurrences.next().getFilename());</span>
        }
        String label;

<span class="nc bnc" id="L634" title="All 2 branches missed.">        if (sourceIDs.size() == 1) {</span>
<span class="nc" id="L635">            String sourceId = sourceIDs.iterator().next();</span>
<span class="nc" id="L636">            int separatorPos = sourceId.lastIndexOf(File.separatorChar);</span>
<span class="nc" id="L637">            label = &quot;...&quot; + sourceId.substring(separatorPos);</span>
<span class="nc" id="L638">        } else {</span>
<span class="nc" id="L639">            label = &quot;(&quot; + sourceIDs.size() + &quot; separate files)&quot;;</span>
        }

<span class="nc" id="L642">        match.setLabel(label);</span>
<span class="nc" id="L643">        return label;</span>
    }

    private void setProgressControls(boolean isRunning) {
<span class="nc" id="L647">        progressPanel.setVisible(isRunning);</span>
<span class="nc bnc" id="L648" title="All 2 branches missed.">        goButton.setEnabled(!isRunning);</span>
<span class="nc" id="L649">        cancelButton.setEnabled(isRunning);</span>
<span class="nc" id="L650">    }</span>

    private void go() {
        try {
<span class="nc" id="L654">            File dirPath = new File(rootDirectoryField.getText());</span>
<span class="nc bnc" id="L655" title="All 2 branches missed.">            if (!dirPath.exists()) {</span>
<span class="nc" id="L656">                JOptionPane.showMessageDialog(frame, &quot;Can't read from that root source directory&quot;, &quot;Error&quot;,</span>
                        JOptionPane.ERROR_MESSAGE);
<span class="nc" id="L658">                return;</span>
            }

<span class="nc" id="L661">            setProgressControls(true);</span>

<span class="nc" id="L663">            Properties p = new Properties();</span>
<span class="nc" id="L664">            CPDConfiguration config = new CPDConfiguration();</span>
<span class="nc" id="L665">            config.setMinimumTileSize(Integer.parseInt(minimumLengthField.getText()));</span>
<span class="nc" id="L666">            config.setEncoding(encodingField.getText());</span>
<span class="nc" id="L667">            config.setIgnoreIdentifiers(ignoreIdentifiersCheckbox.isSelected());</span>
<span class="nc" id="L668">            config.setIgnoreLiterals(ignoreLiteralsCheckbox.isSelected());</span>
<span class="nc" id="L669">            config.setIgnoreAnnotations(ignoreAnnotationsCheckbox.isSelected());</span>
<span class="nc" id="L670">            config.setIgnoreUsings(ignoreUsingsCheckbox.isSelected());</span>
<span class="nc" id="L671">            p.setProperty(LanguageFactory.EXTENSION, extensionField.getText());</span>

<span class="nc" id="L673">            LanguageConfig conf = languageConfigFor((String) languageBox.getSelectedItem());</span>
<span class="nc" id="L674">            Language language = conf.languageFor(p);</span>
<span class="nc" id="L675">            config.setLanguage(language);</span>

<span class="nc" id="L677">            CPDConfiguration.setSystemProperties(config);</span>

<span class="nc" id="L679">            CPD cpd = new CPD(config);</span>
<span class="nc" id="L680">            cpd.setCpdListener(this);</span>
<span class="nc" id="L681">            tokenizingFilesBar.setMinimum(0);</span>
<span class="nc" id="L682">            phaseLabel.setText(&quot;&quot;);</span>
<span class="nc bnc" id="L683" title="All 2 branches missed.">            if (isLegalPath(dirPath.getPath(), conf)) { // should use the</span>
                // language file filter
                // instead?
<span class="nc" id="L686">                cpd.add(dirPath);</span>
            } else {
<span class="nc bnc" id="L688" title="All 2 branches missed.">                if (recurseCheckbox.isSelected()) {</span>
<span class="nc" id="L689">                    cpd.addRecursively(dirPath);</span>
                } else {
<span class="nc" id="L691">                    cpd.addAllInDirectory(dirPath);</span>
                }
            }
<span class="nc" id="L694">            Timer t = createTimer();</span>
<span class="nc" id="L695">            t.start();</span>
<span class="nc" id="L696">            cpd.go();</span>
<span class="nc" id="L697">            t.stop();</span>

<span class="nc" id="L699">            matches = new ArrayList&lt;&gt;();</span>
<span class="nc bnc" id="L700" title="All 2 branches missed.">            for (Iterator&lt;Match&gt; i = cpd.getMatches(); i.hasNext();) {</span>
<span class="nc" id="L701">                Match match = i.next();</span>
<span class="nc" id="L702">                setLabelFor(match);</span>
<span class="nc" id="L703">                matches.add(match);</span>
<span class="nc" id="L704">            }</span>

<span class="nc" id="L706">            setListDataFrom(matches);</span>
<span class="nc" id="L707">            String report = new SimpleRenderer().render(cpd.getMatches());</span>
<span class="nc bnc" id="L708" title="All 2 branches missed.">            if (report.length() == 0) {</span>
<span class="nc" id="L709">                JOptionPane.showMessageDialog(frame,</span>
                        &quot;Done. Couldn't find any duplicates longer than &quot; + minimumLengthField.getText() + &quot; tokens&quot;);
            } else {
<span class="nc" id="L712">                resultsTextArea.setText(report);</span>
            }
<span class="nc" id="L714">        } catch (IOException t) {</span>
<span class="nc" id="L715">            t.printStackTrace();</span>
<span class="nc" id="L716">            JOptionPane.showMessageDialog(frame, &quot;Halted due to &quot; + t.getClass().getName() + &quot;; &quot; + t.getMessage());</span>
<span class="nc" id="L717">        } catch (RuntimeException t) {</span>
<span class="nc" id="L718">            t.printStackTrace();</span>
<span class="nc" id="L719">            JOptionPane.showMessageDialog(frame, &quot;Halted due to &quot; + t.getClass().getName() + &quot;; &quot; + t.getMessage());</span>
<span class="nc" id="L720">        }</span>
<span class="nc" id="L721">        setProgressControls(false);</span>
<span class="nc" id="L722">    }</span>

    private Timer createTimer() {

<span class="nc" id="L726">        final long start = System.currentTimeMillis();</span>

<span class="nc" id="L728">        Timer t = new Timer(1000, new ActionListener() {</span>
            @Override
            public void actionPerformed(ActionEvent e) {
<span class="nc" id="L731">                long now = System.currentTimeMillis();</span>
<span class="nc" id="L732">                long elapsedMillis = now - start;</span>
<span class="nc" id="L733">                long elapsedSeconds = elapsedMillis / 1000;</span>
<span class="nc" id="L734">                long minutes = (long) Math.floor(elapsedSeconds / 60);</span>
<span class="nc" id="L735">                long seconds = elapsedSeconds - (minutes * 60);</span>
<span class="nc" id="L736">                timeField.setText(formatTime(minutes, seconds));</span>
<span class="nc" id="L737">            }</span>
        });
<span class="nc" id="L739">        return t;</span>
    }

    private static String formatTime(long minutes, long seconds) {

<span class="nc" id="L744">        StringBuilder sb = new StringBuilder(5);</span>
<span class="nc bnc" id="L745" title="All 2 branches missed.">        if (minutes &lt; 10) {</span>
<span class="nc" id="L746">            sb.append('0');</span>
        }
<span class="nc" id="L748">        sb.append(minutes).append(':');</span>
<span class="nc bnc" id="L749" title="All 2 branches missed.">        if (seconds &lt; 10) {</span>
<span class="nc" id="L750">            sb.append('0');</span>
        }
<span class="nc" id="L752">        sb.append(seconds);</span>
<span class="nc" id="L753">        return sb.toString();</span>
    }

    private interface SortingTableModel&lt;E&gt; extends TableModel {
        int sortColumn();

        void sortColumn(int column);

        boolean sortDescending();

        void sortDescending(boolean flag);

        void sort(Comparator&lt;E&gt; comparator);
    }

    private TableModel tableModelFrom(final List&lt;Match&gt; items) {

<span class="nc" id="L770">        TableModel model = new SortingTableModel&lt;Match&gt;() {</span>

            private int sortColumn;
            private boolean sortDescending;

            @Override
            public Object getValueAt(int rowIndex, int columnIndex) {
<span class="nc" id="L777">                Match match = items.get(rowIndex);</span>
<span class="nc bnc" id="L778" title="All 5 branches missed.">                switch (columnIndex) {</span>
                case 0:
<span class="nc" id="L780">                    return match.getLabel();</span>
                case 2:
<span class="nc" id="L782">                    return Integer.toString(match.getLineCount());</span>
                case 1:
<span class="nc bnc" id="L784" title="All 2 branches missed.">                    return match.getMarkCount() &gt; 2 ? Integer.toString(match.getMarkCount()) : &quot;&quot;;</span>
                case 99:
<span class="nc" id="L786">                    return match;</span>
                default:
<span class="nc" id="L788">                    return &quot;&quot;;</span>
                }
            }

            @Override
            public int getColumnCount() {
<span class="nc" id="L794">                return matchColumns.length;</span>
            }

            @Override
            public int getRowCount() {
<span class="nc" id="L799">                return items.size();</span>
            }

            @Override
            public boolean isCellEditable(int rowIndex, int columnIndex) {
<span class="nc" id="L804">                return false;</span>
            }

            @Override
            public Class&lt;?&gt; getColumnClass(int columnIndex) {
<span class="nc" id="L809">                return Object.class;</span>
            }

            @Override
            public void setValueAt(Object aValue, int rowIndex, int columnIndex) {
<span class="nc" id="L814">            }</span>

            @Override
            public String getColumnName(int i) {
<span class="nc" id="L818">                return matchColumns[i].label();</span>
            }

            @Override
            public void addTableModelListener(TableModelListener l) {
<span class="nc" id="L823">            }</span>

            @Override
            public void removeTableModelListener(TableModelListener l) {
<span class="nc" id="L827">            }</span>

            @Override
            public int sortColumn() {
<span class="nc" id="L831">                return sortColumn;</span>
            }

            @Override
            public void sortColumn(int column) {
<span class="nc" id="L836">                sortColumn = column;</span>
<span class="nc" id="L837">            }</span>

            @Override
            public boolean sortDescending() {
<span class="nc" id="L841">                return sortDescending;</span>
            }

            @Override
            public void sortDescending(boolean flag) {
<span class="nc" id="L846">                sortDescending = flag;</span>
<span class="nc" id="L847">            }</span>

            @Override
            public void sort(Comparator&lt;Match&gt; comparator) {
<span class="nc" id="L851">                Collections.sort(items, comparator);</span>
<span class="nc bnc" id="L852" title="All 2 branches missed.">                if (sortDescending) {</span>
<span class="nc" id="L853">                    Collections.reverse(items);</span>
                }
<span class="nc" id="L855">            }</span>
        };

<span class="nc" id="L858">        return model;</span>
    }

    private void sortOnColumn(int columnIndex) {
<span class="nc" id="L862">        Comparator&lt;Match&gt; comparator = matchColumns[columnIndex].sorter();</span>
<span class="nc" id="L863">        SortingTableModel&lt;Match&gt; model = (SortingTableModel&lt;Match&gt;) resultsTable.getModel();</span>
<span class="nc bnc" id="L864" title="All 2 branches missed.">        if (model.sortColumn() == columnIndex) {</span>
<span class="nc bnc" id="L865" title="All 2 branches missed.">            model.sortDescending(!model.sortDescending());</span>
        }
<span class="nc" id="L867">        model.sortColumn(columnIndex);</span>
<span class="nc" id="L868">        model.sort(comparator);</span>

<span class="nc" id="L870">        resultsTable.getSelectionModel().clearSelection();</span>
<span class="nc" id="L871">        resultsTable.repaint();</span>
<span class="nc" id="L872">    }</span>

    private void setListDataFrom(List&lt;Match&gt; matches) {

<span class="nc" id="L876">        resultsTable.setModel(tableModelFrom(matches));</span>

<span class="nc" id="L878">        TableColumnModel colModel = resultsTable.getColumnModel();</span>
        TableColumn column;
        int width;

<span class="nc bnc" id="L882" title="All 2 branches missed.">        for (int i = 0; i &lt; matchColumns.length; i++) {</span>
<span class="nc bnc" id="L883" title="All 2 branches missed.">            if (matchColumns[i].width() &gt; 0) {</span>
<span class="nc" id="L884">                column = colModel.getColumn(i);</span>
<span class="nc" id="L885">                width = matchColumns[i].width();</span>
<span class="nc" id="L886">                column.setPreferredWidth(width);</span>
<span class="nc" id="L887">                column.setMinWidth(width);</span>
<span class="nc" id="L888">                column.setMaxWidth(width);</span>
            }
        }
<span class="nc" id="L891">    }</span>

    // CPDListener
    @Override
    public void phaseUpdate(int phase) {
<span class="nc" id="L896">        phaseLabel.setText(getPhaseText(phase));</span>
<span class="nc" id="L897">    }</span>

    public String getPhaseText(int phase) {
<span class="nc bnc" id="L900" title="All 6 branches missed.">        switch (phase) {</span>
        case CPDListener.INIT:
<span class="nc" id="L902">            return &quot;Initializing&quot;;</span>
        case CPDListener.HASH:
<span class="nc" id="L904">            return &quot;Hashing&quot;;</span>
        case CPDListener.MATCH:
<span class="nc" id="L906">            return &quot;Matching&quot;;</span>
        case CPDListener.GROUPING:
<span class="nc" id="L908">            return &quot;Grouping&quot;;</span>
        case CPDListener.DONE:
<span class="nc" id="L910">            return &quot;Done&quot;;</span>
        default:
<span class="nc" id="L912">            return &quot;Unknown&quot;;</span>
        }
    }

    @Override
    public void addedFile(int fileCount, File file) {
<span class="nc" id="L918">        tokenizingFilesBar.setMaximum(fileCount);</span>
<span class="nc" id="L919">        tokenizingFilesBar.setValue(tokenizingFilesBar.getValue() + 1);</span>
<span class="nc" id="L920">    }</span>
    // CPDListener

    public static void main(String[] args) {
        // this should prevent the disk not found popup
        // System.setSecurityManager(null);
<span class="nc" id="L926">        new GUI();</span>
<span class="nc" id="L927">    }</span>

}
</pre><div class="footer"><span class="right">Created with <a href="http://www.eclemma.org/jacoco">JaCoCo</a> 0.7.5.201505241946</span></div></body></html>